<%= link_to "← 戻る", request.referer || categories_path, class: "text-sm text-gray-500 mb-2 inline-block" %>

<h1 class="text-xl font-bold mb-2"><%= @product.name %></h1>

<% if @product.memo.present? %>
  <p class="text-sm text-gray-600 mb-4"><%= @product.memo %></p>
<% end %>

<h2 class="text-lg font-semibold mb-2">価格履歴</h2>

<% if @price_records.empty? %>
  <p class="text-sm text-gray-500">この商品の購入履歴はまだありません</p>
<% else %>
  <div class="space-y-3">
    <% @price_records.each do |record| %>
      <%= link_to edit_price_record_path(record), class: "block bg-white shadow rounded-lg p-4 hover:bg-ray-50 transition" do %>
      <div class="flex justify-between items-start">
        <div>
          <p class="text-sm text-gray-500">日付： <%= l record.purchased_on, format: :short %></p>
          <p class="text-base font-semibold">金額： <%= number_to_currency(record.price, unite: "¥") %></p>
          <p class="text-sm text-gray-500">場所： <%= record.shop_name %></p>
        </div>
        <% if record.memo.present? %>
          <i class="fas fa-sticky-note text-gray-400 text-lg"></i>
        <% end %>
      </div>
      <% end %>
    <% end %>
  </div>

  <!-- ページネーション -->
  <div class="mt-4">
    <%= paginate @price_records, theme: 'bootstrap-5' %>
  </div>
<% end %>