<%= form_with(
      model: shopping_item,
      url: shopping_list_shopping_item_path(shopping_item),
      method: :patch,
      data: { turbo_stream: true },
      class: "space-y-5"
    ) do |f| %>

  <!-- 商品名 -->
  <div>
    <%= f.label :name, "商品名", class: "block text-gray-700 font-medium mb-1" %>
    <%= f.text_field :name,
          class: "w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand placeholder-gray-400 transition",
          placeholder: "例：にんじん" %>
  </div>

  <!-- メモ -->
  <div>
    <%= f.label :memo, "メモ", class: "block text-gray-700 font-medium mb-1" %>
    <%= f.text_area :memo,
          rows: 3,
          class: "w-full border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-brand placeholder-gray-400 transition",
          placeholder: "補足情報など" %>
  </div>

  <!-- ボタンエリア -->
  <div class="flex justify-between items-center pt-2">
    <%= f.submit "更新する",
          class: "bg-brand text-white font-semibold px-6 py-2 rounded-full shadow hover:bg-orange-600 transition duration-200 active:scale-[0.98]" %>

    <!-- confirm コントローラで囲む -->
    <div data-controller="confirm" class="relative">
      <%= button_to "削除する",
            shopping_list_shopping_item_path(shopping_item),
            method: :delete,
            data: {
              action: "click->confirm#confirm",
              confirm_message: "この商品を削除しますか？"
            },
            class: "text-red-500 hover:text-red-600 font-medium text-sm transition" %>

      <!-- 共通モーダル -->
      <div data-confirm-target="modal"
           class="hidden fixed inset-0 bg-black/40 flex justify-center items-center z-50">
        <div class="bg-white rounded-2xl p-6 shadow-xl w-80 text-center border border-orange-100">
          <p data-confirm-target="message" class="text-gray-700 mb-4">
            本当に削除しますか？
          </p>

          <div class="flex justify-center gap-4">
            <button data-action="click->confirm#proceed"
                    class="bg-red-500 text-white px-4 py-2 rounded-xl hover:bg-red-600 shadow">
              削除
            </button>
            <button data-action="click->confirm#cancel"
                    class="bg-gray-200 text-gray-700 px-4 py-2 rounded-xl hover:bg-gray-300">
              キャンセル
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
<% end %>