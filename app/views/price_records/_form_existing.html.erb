<%= form_with model: @price_record,
              data: { turbo_frame: "price_record_form", controller: "category-filter" },
              url: url,
              local: false,
              class: "space-y-5" do |f| %>

  <%= f.hidden_field :mode, value: "existing" %>

  <!-- カテゴリー絞り込み -->
  <div>
    <%= f.label :category_filter, "カテゴリー", class: "block text-sm font-semibold text-gray-700 mb-1" %>
    <%= select_tag :category_filter,
          options_from_collection_for_select(@categories, :id, :name, params[:category_filter]),
          prompt: "全て",
          class: "w-full rounded-xl border-gray-300 focus:ring-2 focus:ring-orange-400
                  focus:border-orange-400 px-3 py-2 bg-white outline-none transition shadow-sm",
          data: { action: "change->category-filter#change" } %>
  </div>

  <!-- 商品選択 -->
  <div id="product_select">
    <div>
      <%= f.label :product_id, "商品名", class: "block text-sm font-semibold text-gray-700 mb-1" %>
      <%= f.collection_select :product_id, @products, :id, :name,
            { prompt: "選択してください" },
            class: "w-full rounded-xl border-gray-300 focus:ring-2 focus:ring-orange-400
                    focus:border-orange-400 px-3 py-2 bg-white outline-none transition shadow-sm" %>
    </div>
  </div>

  <!-- 店舗選択 -->
  <div>
    <%= f.label :shop_id, "店名", class: "block text-sm font-semibold text-gray-700 mb-1" %>
    <%= f.collection_select :shop_id, @shops, :id, :name,
          { prompt: "選択してください" },
          class: "w-full rounded-xl border-gray-300 focus:ring-2 focus:ring-orange-400
                  focus:border-orange-400 px-3 py-2 bg-white outline-none transition shadow-sm" %>
  </div>

  <!-- 価格 -->
  <div>
    <%= f.label :price, "価格", class: "block text-sm font-semibold text-gray-700 mb-1" %>
    <%= f.number_field :price,
          step: 1,
          placeholder: "例：198",
          class: "w-full rounded-xl border-gray-300 focus:ring-2 focus:ring-orange-400
                  focus:border-orange-400 px-3 py-2 outline-none transition placeholder-gray-400 shadow-sm" %>
  </div>

  <!-- 日付 -->
  <div>
    <%= f.label :purchased_at, "日付", class: "block text-sm font-semibold text-gray-700 mb-1" %>
    <%= f.date_field :purchased_at,
          value: @price_record.purchased_at || Date.today,
          class: "w-full rounded-xl border-gray-300 focus:ring-2 focus:ring-orange-400
                  focus:border-orange-400 px-3 py-2 outline-none transition shadow-sm" %>
  </div>

  <!-- メモ -->
  <div>
    <%= f.label :memo, "メモ", class: "block text-sm font-semibold text-gray-700 mb-1" %>
    <%= f.text_area :memo,
          rows: 3,
          placeholder: "例：広告の品、特売日など",
          class: "w-full rounded-xl border-gray-300 focus:ring-2 focus:ring-orange-400
                  focus:border-orange-400 px-3 py-2 outline-none transition placeholder-gray-400 shadow-sm" %>
  </div>

  <!-- 登録ボタン -->
  <div class="pt-3">
    <%= f.submit "登録する",
          class: "w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-2.5
                  rounded-xl shadow-md transition-transform active:scale-[0.98]" %>
  </div>
<% end %>