<h1 class="text-xl font-bold mb-4">価格登録</h1>

<%= render "shared/error_message", resource: @price_record %>

<div class="flex justify-center space-x-4 mb-6">
  <%= link_to "新規登録", new_price_record_path(mode: :new), class: "btn #{ @mode != 'existing' ? 'btn-orange' : 'btn-outline'}" %>
  <%= link_to "既存から選択", new_price_record_path(mode: :existing), class: "btn #{ @mode == 'existing' ? 'btn-orange' : 'btn-outline'}" %>
</div>

<div style="background: lightblue; padding: 10px;">
  <p>現在の@mode: "<%= @mode %>"</p>
  <p>@mode == 'existing': <%= @mode == 'existing' %></p>
  <p>@products.present?: <%= defined?(@products) && @products.present? %></p>
  <% if defined?(@products) && @products.present? %>
    <p>商品数: <%= @products.count %></p>
  <% end %>
</div>

<% if @mode == 'existing' %>
  <%= render 'form_existing', price_record: @price_record, url: price_records_path %>
<% else %>
  <%= render 'form_new', price_record: @price_record, url: price_records_path %>
<% end %>